<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Roboto&display=swap" rel="stylesheet">
    <title>Buddies For Scrummies</title>
</head>

<body>
    <header>
        <div id="loginButton">
            <button class="loginButton" id="btnLogin">Log In</button>
            <button class="loginButton" id="btnLogout">Log out</button>
        </div>
        <div id ="logoContainer">
            <img src="img.webp" alt="Buddies For Scrummies Logo">
        </div>
        <div id="titleContainer">
            <h1>Buddies For Scrummies</h1>
        </div>
    </header>

  <main class="main">
    <h1 id="mentortitle">Mentor</h1>
    <br>
    <table id="data-table">
      <thead>
        <tr>
          <th colspan="2">Available Mentors</th>
            <button id="listmentee" class="typeButton">Choose a Mentor</button>
            <div id="showlist" style="padding-top: 20px;"></div>
        </tr>
      </thead>
      <tbody>
      </tbody>

    </table>

  </main>

  <script>
document.addEventListener("DOMContentLoaded", function() {
    const findMentorButton = document.getElementById("listmentee");
    

    findMentorButton.addEventListener("click", function() {
        fetchMentorData().then(mentors => {
            displayMatchResults(mentors);
        }).catch(error => {
            console.error('Error fetching mentor data:', error);
            displayMatchResults(["Error fetching mentor data."]);
        });
    });
});

function fetchMentorData() {
    return fetch('/getMentorDetails')
        .then(response => response.json())
        .then(data => data)
        .catch(error => console.error('Error fetching mentor data:', error));
}

function displayMatchResults(mentors) {
    const resultDisplay = document.getElementById("showlist");
    var mentorlist = [];

    resultDisplay.style.color = "black";
    resultDisplay.innerHTML = ''; // Clear the previous content

    if (mentors.length === 0) {
        resultDisplay.textContent = "No suitable mentors found.";
    } else {
        resultDisplay.innerHTML = "Matched Mentors:<br>";
        mentors.forEach(mentor => {
            resultDisplay.innerHTML += `<div>Username: ${mentor.userName} (${mentor.userEmail}) with colorType: ${mentor.colorType}</div>`;
            mentorlist.push({ "Name": mentor.userName, "Email": mentor.userEmail});
        });
        console.log(mentorlist);
    }
}
  </script>
    <script src="script.js">
    </script>


    
</body>

</html>

